<html>
<head>
  <link rel='stylesheet' type='text/css' href='dist/css/slate.min.css'></link>
</head>
<body>
  <div class='item-container'>
    <h1 class='title'>Undertale Settings</h1>

    <div class="item-container">
      <div class="item-container-header">Animation</div>
      <div class="item-container-content">
        <label class="item">
          Animation Frequency
          <select id="animation_freq" name="animation_freq" dir='rtl' class="item-select">
            <option class="item-select-option" value='0'>Always on</option>
            <option class="item-select-option" value='1' selected>Every min</option>
            <option class="item-select-option" value='2'>Every Hour</option>
          </select>
        </label>
      </div>
    </div>

    <div class='item-container'>
      <div class='button-container'>
        <input id='submit_button' type='button' class='item-button' value='SUBMIT'>
      </div>
    </div>
  </div>
  <script src='dist/js/slate.min.js'></script>
  <script type='text/javascript'>
    // Default values
    var config = {
      "animation_freq": "1"
    };

    config["animation_freq"] = $('#animation_freq')[0].value();

    function getQueryParam(variable, defaultValue) {
      var query = location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');

        if (pair[0] === variable) { return decodeURIComponent(pair[1]); }
      }
      return defaultValue || false;
    }

    $('#submit_button').on('click', function(){
      // Set the return URL depending on the runtime environment
      var return_to = getQueryParam('return_to', 'pebblejs://close#');
      var return_url = return_to + encodeURIComponent(JSON.stringify(config));
      document.location = return_url;
    });
  </script>
</body>
</html>
